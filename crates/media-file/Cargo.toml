# SPDX-FileCopyrightText: Copyright (C) 2018-2023 Uwe Klotz <uwedotklotzatgmaildotcom> et al.
# SPDX-License-Identifier: AGPL-3.0-or-later

[package]
name = "aoide-media-file"
description = "aoide - File-based import/export of metadata for media sources and tracks"
version = { workspace = true }
license = { workspace = true }
edition = { workspace = true }
rust-version = { workspace = true }

[dependencies]
anyhow = "1.0.72"
base64 = "0.21.2"
blake3 = { version = "1.4.1", features = ["traits-preview"] }
bitflags = "2.3.3"
bytes = "1.4.0"
color-thief = "0.2.2"
digest = "0.10.7"
image = "0.24.6"
lofty = "0.15.0"
# Use main branch of lofty-rs for testing unreleased features
#lofty = { git = "https://github.com/Serial-ATA/lofty-rs", branch = "main" }
log = "0.4.19"
mime = "0.3.17"
mime_guess = "2.0.4"
nom = "7.1.3"
num-traits = "0.2.16"
thiserror = "1.0.44"
time = { version = "0.3.23", features = ["parsing"] }
url = "2.4.0"
walkdir = "2.3.3"

# Dependencies (optional): gigtag
gigtag = { version = "0.1.6", optional = true }
compact_str = { version = "0.7.1", optional = true }

# Dependencies (optional): serato-markers
triseratops = { version = "0.0.2", optional = true }

# Workspace dependencies
aoide-core = { version = "=0.8.0", path = "../core" }

[dev-dependencies]
aoide-media-file = { version = "=0.8.0", path = "../media-file" }
tempfile = "3.7.0"

[features]
default = ["all"]
all = ["gigtag", "serato-markers"]
gigtag = ["dep:gigtag", "dep:compact_str"]
serato-markers = ["dep:triseratops"]
